!function(){window.Dashboard=window.Dashboard||{};var e=new MobileDetect;Dashboard.Settings=Dashboard.Settings||{},Dashboard.Settings.SidebarMenuAnimationDuration=300,Dashboard.Settings.SidebarMenuAnimationEasing="",Dashboard.Sidebar={setSideSubmenusMinHeight:function(){},saveSidebarStartupClasses:function(){var e="",t=$("body"),a=["sidebar-slim","sidebar-big-icons","sidebar-overlay","sidebar-disabled"];bodyClassList=t.prop("class").split(" "),bodyClassList.forEach(function(t){a.indexOf(t)>=0&&(e+=t+" ")}),t.data("start-sidebar-classes",e)},setSidebarState:function(){var e=$("body"),t=e.data("start-sidebar-classes");t.indexOf("sidebar-disabled")>=0||(window.matchMedia(Dashboard.Helpers.DeviceMediaQueries.SCREEN_XS).matches&&(e.removeClass("sidebar-slim "+t),e.addClass("sidebar-overlay")),window.matchMedia(Dashboard.Helpers.DeviceMediaQueries.SCREEN_SM).matches&&(e.removeClass("sidebar-overlay "+t),e.addClass("sidebar-slim")),window.matchMedia(Dashboard.Helpers.DeviceMediaQueries.SCREEN_MD).matches&&(e.removeClass("sidebar-overlay"),e.removeClass("sidebar-slim"),e.addClass(t)))},setupMenu:function(e){function t(e){for(var t=0,a=e.parentElement;"LI"===a.nodeName||"UL"===a.nodeName;)"UL"===a.nodeName&&t++,a=a.parentElement;return t}e.find("li").each(function(){var a=$(this),i=a.find(">ul"),n=a.find(">a");if(i.length>0){if(a.parent()[0]===e[0]){a.addClass("primary-submenu");var s=n.children(".nav-label");s&&i.attr("data-submenu-title",s.text().trim())}a.addClass("has-submenu"),i.addClass("submenu-level-"+t(i[0]))}})},openOverlay:function(){var e=$(".sidebar"),t=$("body");t.hasClass("sidebar-overlay__open")||(t.addClass("sidebar-overlay__open"),e.velocity({left:[0,-e.width()]},{duration:200,easing:"ease-out"}))},closeOverlay:function(){var e=$(".sidebar");$("body").hasClass("sidebar-overlay__open")&&e.velocity({left:[-e.width(),0]},{duration:200,easing:"ease-in",complete:function(){$("body").removeClass("sidebar-overlay__open"),e.css("left","auto")}})},expandMenuToCurrentLink:function(){var e=Dashboard.Helpers.isDefaultSidebar(),t=Dashboard.Helpers.isSidebarSlim(),a=Dashboard.Helpers.isSidebarBigIcons();$(".sidebar .expanded").removeClass("expanded");for(var i=$(".sidebar .side-menu li.active");"LI"==i.prop("tagName")||"UL"==i.prop("tagName");)"LI"==i.prop("tagName")&&((!e||i.hasClass("side-menu"))&&(e||t||a||i.hasClass("primary-submenu"))||i.addClass("expanded"),i.addClass("nested-active")),i=i.parent()},setMenuTooltips:function(e){Dashboard.Helpers.isSidebarSlim()?e.find("> li:not(.has-submenu) a").tooltip({placement:"right",container:"body",trigger:"hover"}):e.find("> li:not(.has-submenu) a").tooltip("destroy")},setMenuHandler:function(t){function a(){if(!e.mobile()){return!Dashboard.Helpers.isDefaultSidebar()}return!1}t.find("li.has-submenu > a").on("click",function(){if(Dashboard.Helpers.isSidebarSlim())return!1;var e=$(this).closest("li"),i=!!t.find(".velocity-animating").length;if(e.hasClass("primary-submenu")&&a()||i)return!1;var n=e.closest("ul").find("> li > ul"),s=e.find("> ul"),r=n.filter(function(){return this!==s[0]});if(e.hasClass("expanded")){o=parseInt(s.prop("scrollHeight"));s.velocity({height:[0,o]},{duration:Dashboard.Settings.SidebarMenuAnimationDuration,easing:Dashboard.Settings.SidebarMenuAnimationEasing,complete:function(){s.closest("li").removeClass("expanded"),s.css("height",""),Dashboard.LayoutControl.setContentMinHeight()}})}else{s.css("display","block");var o=parseInt(s.prop("scrollHeight"));s.velocity({height:[o,0]},{display:"",duration:Dashboard.Settings.SidebarMenuAnimationDuration,easing:Dashboard.Settings.SidebarMenuAnimationEasing,complete:function(){s.css("height",""),e.addClass("expanded")}});var d=r.filter(function(){return $(this).closest("li").hasClass("expanded")}),c=Dashboard.Helpers.calcElementsHeightSum(d);d.each(function(){var e=$(this);e.velocity({height:[0,e.prop("scrollHeight")]},{duration:Dashboard.Settings.SidebarMenuAnimationDuration,easing:Dashboard.Settings.SidebarMenuAnimationEasing,complete:function(){e.closest("li").removeClass("expanded"),e.css("height","")}})});var l=Dashboard.Helpers.isSidebarBigIcons()?0:o-c;Dashboard.LayoutControl.setContentMinHeight(l)}})}},Dashboard.InnerNavigator={init:function(e,t){var a=$(t);a.length>0&&(a.addClass("active"),Dashboard.Sidebar.expandMenuToCurrentLink());var i=$(e),n=i.find("> li"),s=i.find(".active");n.find("ul").show().each(function(){$(this).data("startHeight",this.scrollHeight).css("overflow","hidden")}),s.parents("li").addClass("active expanded"),n.filter(":not(.expanded)").find("ul").hide(),n.on("click",function(){var e=$(this);if(!e.hasClass("expanded")){var t=e.find("ul");n.find("ul").not(t).each(function(){var e=$(this);e.velocity({height:[0]},{duration:Dashboard.Settings.SidebarMenuAnimationDuration,easing:Dashboard.Settings.SidebarMenuAnimationEasing,complete:function(){e.closest("li").removeClass("expanded"),e.css("display","none")}})}),t.css("display","block"),t.velocity({height:[t.data("startHeight"),0]},{duration:Dashboard.Settings.SidebarMenuAnimationDuration,easing:Dashboard.Settings.SidebarMenuAnimationEasing,complete:function(){e.addClass("expanded")}})}})}}}();

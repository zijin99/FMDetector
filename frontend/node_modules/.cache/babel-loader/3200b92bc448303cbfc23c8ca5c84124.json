{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/matthewchang/workspace/cmu/fmdetector/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/matthewchang/workspace/cmu/fmdetector/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useHistory}from'react-router-dom';import axios from\"axios\";import\"../header.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddStudent=function AddStudent(_ref){var goBack=_ref.goBack;var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),departments=_useState4[0],setDepartments=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),andrewId=_useState10[0],setAndrewId=_useState10[1];var _useState11=useState(2021),_useState12=_slicedToArray(_useState11,2),graduateYear=_useState12[0],setGraduateYear=_useState12[1];var _useState13=useState(\"60dbae8b04ce81aba6aaa20c\"),_useState14=_slicedToArray(_useState13,2),department=_useState14[0],setDepartment=_useState14[1];var onFileChange=function onFileChange(event){console.log(event.target.files[0]);setFile(event.target.files[0]);};var history=useHistory();var handleBack=function handleBack(){history.push(\"/student/\");};var getDepartments=function getDepartments(){axios.get(\"/department/\").then(function(response){setDepartments(response.data);});};var handleSubmit=function handleSubmit(e){e.preventDefault();var formData=new FormData();formData.append('file',file);var _iterator=_createForOfIteratorHelper(formData.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;console.log(key[0]+', '+key[1]);}}catch(err){_iterator.e(err);}finally{_iterator.f();}axios.post(\"/admin/adminUpload/?andrewId=\".concat(andrewId),formData,{headers:{'Content-Type':'multipart/form-data'}}).then(function(response){var faceId=response.data;var student={name:name,email:email,andrewId:andrewId,deptId:department,graduateYear:graduateYear,faceId:faceId};axios.post(\"/student/\",student).then(function(){//history.push(`/student/list`);\n});});};var handleChange=function handleChange(e){setDepartment(e.target.value);};useEffect(function(){getDepartments();},[]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"panel panel-default shadow-box b-a-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"panel-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-title\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"m-t-3\",children:\"Add Student\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"exampleInputEmail1\",placeholder:\"Student Name\",onChange:function onChange(e){return setName(e.target.value);},value:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"exampleInputEmail1\",placeholder:\"Email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Andrew ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"exampleInputEmail1\",placeholder:\"Andrew ID\",onChange:function onChange(e){return setAndrewId(e.target.value);},value:andrewId})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputEmail3\",className:\"col-sm-3 control-label\",children:\"Department\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-9\",children:/*#__PURE__*/_jsx(\"select\",{className:\"form-control\",onChange:function onChange(e){return handleChange(e);},children:departments.map(function(dept,key){return/*#__PURE__*/_jsxs(\"option\",{value:dept.id,children:[dept.name,\" - \",dept.location]},key);})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputEmail1\",children:\"Graduate Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"exampleInputEmail1\",placeholder:\"ex: 2021\",onChange:function onChange(e){return setGraduateYear(e.target.value);},value:graduateYear})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"exampleInputFile\",children:\"Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",onChange:function onChange(e){return onFileChange(e);}}),/*#__PURE__*/_jsx(\"p\",{className:\"help-block\",children:\"Please upload student's photo\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"}),\" \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){return handleBack();},children:\"Back\"})]})})})]})})]});};export default AddStudent;","map":{"version":3,"sources":["/Users/matthewchang/workspace/cmu/fmdetector/frontend/src/components/AddStudent.js"],"names":["React","useEffect","useState","useHistory","axios","AddStudent","goBack","file","setFile","departments","setDepartments","name","setName","email","setEmail","andrewId","setAndrewId","graduateYear","setGraduateYear","department","setDepartment","onFileChange","event","console","log","target","files","history","handleBack","push","getDepartments","get","then","response","data","handleSubmit","e","preventDefault","formData","FormData","append","entries","key","post","headers","faceId","student","deptId","handleChange","value","map","dept","id","location"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport {useHistory} from 'react-router-dom'\n\nimport axios from \"axios\";\nimport \"../header.css\";\n\nconst AddStudent = ({goBack}) => {\n    const [file, setFile] = useState();\n\n    const [departments, setDepartments] = useState([]);\n\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [andrewId, setAndrewId] = useState(\"\");\n    const [graduateYear, setGraduateYear] = useState(2021);\n    const [department, setDepartment] = useState(\"60dbae8b04ce81aba6aaa20c\");\n\n    const onFileChange = event => {\n        console.log(event.target.files[0])\n        setFile(event.target.files[0])\n    };\n\n    const history = useHistory();\n\n    const handleBack = () => {\n        history.push(`/student/`);\n    };\n\n    const getDepartments = () => {\n        axios.get(\"/department/\").then(response => {\n            setDepartments(response.data);\n        })\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        const formData = new FormData();\n        formData.append('file', file);\n        for (var key of formData.entries()) {\n            console.log(key[0] + ', ' + key[1]);\n        }\n\n\n        axios.post(`/admin/adminUpload/?andrewId=${andrewId}`, formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }\n        }).then(response => {\n            const faceId = response.data;\n            const student = {\n                name,\n                email,\n                andrewId,\n                deptId: department,\n                graduateYear,\n                faceId,\n            };\n\n\n            axios.post(\"/student/\", student).then(() => {\n                //history.push(`/student/list`);\n            })\n        })\n\n    }\n\n    const handleChange = (e) => {\n        setDepartment(e.target.value);\n    }\n\n    useEffect(() => {\n        getDepartments();\n    }, []);\n\n\n    return (\n        <React.Fragment>\n            <br/>\n            <br/>\n            <div className=\"panel panel-default shadow-box b-a-0\">\n                <div className=\"panel-body\">\n                    <div className=\"panel-title\"><h4 className=\"m-t-3\">Add Student</h4></div>\n                    <div className=\"row\">\n                        <div className=\"col-sm-12\">\n\n                            <form onSubmit={handleSubmit}>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"exampleInputEmail1\">Name</label>\n                                    <input type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\"\n                                           placeholder=\"Student Name\" onChange={(e) => setName(e.target.value)} value={name}/>\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"exampleInputEmail1\">Email address</label>\n                                    <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\"\n                                           placeholder=\"Email\" onChange={e => setEmail(e.target.value)} value={email}/>\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"exampleInputEmail1\">Andrew ID</label>\n                                    <input type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\"\n                                           placeholder=\"Andrew ID\" onChange={e => setAndrewId(e.target.value)} value={andrewId}/>\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"inputEmail3\" className=\"col-sm-3 control-label\">Department</label>\n                                    <div className=\"col-sm-9\">\n                                        <select className=\"form-control\" onChange={e => handleChange(e)}>\n                                            {departments.map((dept, key) => <option value={dept.id}\n                                                                                    key={key}>{dept.name} - {dept.location}</option>)}\n                                        </select>\n                                    </div>\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"exampleInputEmail1\">Graduate Year</label>\n                                    <input type=\"text\" className=\"form-control\" id=\"exampleInputEmail1\"\n                                           placeholder=\"ex: 2021\" onChange={e => setGraduateYear(e.target.value)} value={graduateYear}/>\n                                </div>\n                                <div className=\"form-group\">\n                                    <label htmlFor=\"exampleInputFile\">Photo</label>\n                                    <input type=\"file\" id=\"file\" onChange={e => onFileChange(e)}/>\n                                    <p className=\"help-block\">Please upload student's photo</p>\n                                </div>\n                                <button type=\"submit\" className=\"btn btn-primary\">Submit</button>\n                                {\" \"}\n                                <button type=\"button\" className=\"btn btn-danger\" onClick={() => handleBack()}>Back\n                                </button>\n                            </form>\n                        </div>\n\n                    </div>\n\n                </div>\n            </div>\n\n        </React.Fragment>\n    );\n}\n\nexport default AddStudent;\n"]},"metadata":{},"sourceType":"module"}